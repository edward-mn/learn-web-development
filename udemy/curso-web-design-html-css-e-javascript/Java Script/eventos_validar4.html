<!doctype html>
<html lang="pt-br">
    <head>
        <title> Curso - Javascript </title>
        <meta charset="utf-8">
    </head>
    <body>
        <h2> Validando Login - textarea - Javascript </h2>

        <textarea name="msg" id="msg" cols='50' rows="10" maxLength="100"></textarea>

        <!-- Aplicando o método Progressive Enhacement -->
        <div style="display: none;" id="restaContainer">
          Restam <span id="resta"></span> caracteres
        </div>
        <script>
          (function(){
            'user strict';
            var $txtMsg = document.getElementById('msg');
            var $restaContainer = document.getElementById('restaContainer');
            var $resta = document.getElementById('resta');
            const maxima = $txtMsg.maxLength;

            mostraContainerResta();
            mostraCaracteresRestantes(maxima);
            $txtMsg.addEventListener('input', checkLength); // Ideal pois pega qualquer inserção de dados

            // Ideal pois pega qualquer inserção de dados
            function checkLength(e){
              // console.log('input value: ', this.value);
              var numeroLetrasDigitadas = this.value.length; // Acessando o tamanho do que foi digitado
              mostraCaracteresRestantes(maxima - numeroLetrasDigitadas);
            }

            function mostraCaracteresRestantes(numero){
              // typeof(numero) = number;
              $resta.textContent = numero;
            }

            function mostraContainerResta(){
              // Alterando CSS via JS - display inline
              $restaContainer.style.display = 'block';
            }

          })()
        </script>
    </body>
</html>