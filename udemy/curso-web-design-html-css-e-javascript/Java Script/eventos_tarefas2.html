<!doctype html>
<html lang="pt-br">
    <head>
        <title> Curso - Javascript </title>
        <meta charset="utf-8">

        <style>
          .done{
            text-decoration: line-through;
            color: #555;
          }
        </style>
    </head>
    <body>
        <h2> Curso - Tarefas - Javascript </h2>
        <input type="text" id="txtTask">
        <button id="btn"> Cadastrar tarefas </button>
        <ul>
          <li>Estudar Javascript - DOM</li>
          <li>Estudar Eventos em Javascript</li>
          <li>Jogar video-game</li>
        </ul>

        <script>
          (function(){
            'use strict';
            var $ul = document.querySelector('ul');
            var $lis = $ul.querySelectorAll('li');
            var $txtTask = document.querySelector('#txtTask');
            var $btn = document.querySelector('#btn');
            const keyEnterValue = 13;

            $btn.addEventListener('click', addTask);
            $txtTask.addEventListener('keyup', function(e){ // Validando se o usuário apertou a tecla enter
              if(e.keyCode === keyEnterValue){
                addTask();
              }
            });

            for(var i = 0; i < $lis.length; i++){
              $lis[i].addEventListener('click', toogleDone);
            };

            function toogleDone(){
              this.classList.toggle('done');
            }

            function addTask(){
              var task = '<li>' + $txtTask.value + '</li>';
              // Não é recomendado utilizar innerHTML, pois toda alteração feita no DOM antes é perdido no momento que passa dele
              $ul.innerHTML += task; // Devemos colocar += se não só será apresentado o último valor da li

              $txtTask.value = '';
              $txtTask.focus();
            };

          })();
        </script>
    </body>
</html>